@using FiveMinute.Data
@using Microsoft.AspNetCore.Identity
@model FiveMinute.ViewModels.HomeViewModels.IndexViewModel

@if (Model != null)
{
	<!-- Вкладки -->
	<ul class="nav nav-tabs">
		<li class="nav-item">
			<a class="nav-link active" data-toggle="tab" href="#fiveMinuteTemplates">Шаблоны</a>
		</li>
		<li class="nav-item">
			<a class="nav-link" data-toggle="tab" href="#fiveMinuteTests">Тесты</a>
		</li>
	</ul>

	<div class="tab-content">
		<div id="fiveMinuteTemplates" class="tab-pane fade show active">
			@if (Model.UserRole == "teacher" || Model.UserRole == "admin")
			{
				if (Model.FMTemplates is not null && Model.FMTemplates.Any())
				{
					<table class="table">
						<thead>
							<tr>
								<th>ID</th>
								<th>Название</th>
								<th></th>
							</tr>
						</thead>
						<tbody>
							@foreach (var test in Model.FMTemplates)
							{
								
								<tr>
									<td>@test.Id</td>
									<td>@test.Name</td>
									<td>
										<a asp-action="Edit" asp-controller="FiveMinuteTemplate" asp-route-Id="@test.Id" class="btn btn-primary">Редактировать</a>
									</td>
								</tr>
								
							}
						</tbody>
					</table>
				}
				else
				{
					<p>Пока тут пусто. Создайте новую!</p>
				}
			}
			else if (Model.UserRole == "Student")
			{
				<p>Привет, студент @Model.UserName! У вас пока нет доступных тестов.</p>
			}
			@if (Model != null)
			{
				<l1 class="nav-item">
					<a class="btn" asp-area="" asp-controller="FiveMinuteTemplate" asp-action="Create">Создать пятиминутку</a>
				</l1>
			}
		</div>

		<div id="fiveMinuteTests" class="tab-pane fade">
			<table class="table">
				<thead>
					<tr>
						<th>ID</th>
						<th>Название</th>
						<th></th>
						<th></th>
					</tr>
				</thead>
				<tbody>
					@foreach (var test in Model.FMTests)
					{
						<tr>
							<td>@test.Id</td>
							<td>@test.Name</td>
							<td>
								<a asp-action="Edit" asp-controller="FiveMinuteTest" asp-route-testId="@test.Id" class="btn btn-primary">Edit</a>
							</td>
							<td>
								<a class="btn btn-secondary" asp-area="" asp-route-testId="@test.Id" asp-controller="FiveMinuteTest" asp-action="Pass">Прохождение теста</a>
								<a class="btn btn-info" asp-area="" asp-route-testId="@test.Id" asp-controller="FiveMinuteStatistics" asp-action="ShowResults">Статистика</a>
								<a class="btn btn-info" asp-area="" asp-route-testId="@test.Id" asp-controller="FiveMinuteTest" asp-action="Detail">Подробнее</a>
							</td>
						</tr>
					}
				</tbody>
			</table>
			@if (Model != null)
			{
				<l1 class="nav-item">
					<a class="btn btn-secondary" asp-area="" asp-controller="FiveMinuteTest" asp-action="Create">Создать тест</a>
				</l1>
			}
		</div>
	</div>
}
<!-- Подключение Bootstrap CSS и JS для работы вкладок -->
<link href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">
<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@@popperjs/core@2.9.2/dist/umd/popper.min.js"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>